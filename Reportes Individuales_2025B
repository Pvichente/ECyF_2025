---
title: "REPORTES INDIVIDUALES DE FACILITADORES"
author: "Gerencia de Evaluación"
date: "`r Sys.Date()`"
output: pdf_document
header-includes:
   - \usepackage{graphicx}
   - \graphicspath{{C:/Users/pvicente.ULIBERTAD/Desktop/}}
   - \usepackage{fancyhdr}
   - \pagestyle{fancy}
   - \fancyhf{}
   - \rhead{\includegraphics[width=0.2\textwidth]{UL_logo.png}}
   - \setlength{\headheight}{30pt}  # Ajuste para evitar solapamiento
   - \cfoot{\thepage}  # Número de página centrado en el pie
   - \renewcommand{\footrulewidth}{0.4pt}  # Línea en el pie de página
params:
  facilitator_mayus: "ALFREDO PHILLIPS GREENE"
  facilitator_minus: "Alfredo Phillips Greene"
  curso: "Financial Accounting"
---

\begin{center}
    \includegraphics[width=0.3\textwidth]{UL_logo.png}
\end{center}

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(knitr)
library(ggplot2)
library(readr)

# Cargar la base de datos
df <- read_csv("https://raw.githubusercontent.com/Pvichente/ECyF_2025/refs/heads/main/Cursos%20y%20Facilitadores_2025B.csv")

# Asegurar que los nombres de columna sean correctos
df <- df %>%
  rename(
    Facilitator = "Facilitador",
    Recommendation = "Var20",
    Comments = "Var13"
  )

# Filtrar datos para el facilitador seleccionado
facilitator_data <- df %>% filter(Facilitator == params$facilitator_mayus)

# Verificar si hay datos después de filtrar
print(head(facilitator_data))

```

Estimado `r params$facilitator_minus`,

La evaluación docente es un pilar fundamental para el fortalecimiento de la calidad educativa en la **Universidad de la Libertad**. Estas evaluaciones permiten identificar fortalezas y áreas de oportunidad en la práctica docente, promoviendo la mejora continua y el desarrollo profesional del cuerpo académico.

El presente documento recopila los resultados de la **Evaluación de Cursos y Facilitadores para el trimestre 2025A**, basándose en las respuestas proporcionadas por los estudiantes del curso **`r params$curso`** durante la primera semana de marzo de 2025. En primer lugar, se presentan las respuestas a afirmaciones relacionadas con la dinámica de las clases, seguidas de la evaluación sobre la claridad y organización del curso, así como la pertinencia de los ejemplos utilizados en el aula. Posteriormente, se incluye el Net Promoter Score (NPS) del facilitador, una métrica que mide la disposición de los estudiantes a recomendar su enseñanza. Finalmente, el informe cierra con retroalimentación sobre posibles áreas de mejora.

Los resultados de esta evaluación no solo permiten al facilitador reflexionar sobre su práctica docente, sino que también constituyen una herramienta clave para la toma de decisiones institucionales orientadas a la excelencia académica. En caso de dudas o comentarios sobre la evaluación, puedes contactarme en el correo [**pavelvicent\@ulibertad.edu.mx**](mailto:pavelvicent@ulibertad.edu.mx){.email}.

\newpage

## REPORTE DE EVALUACIÓN DE `r params$facilitator_mayus`


*A) ¿Qué tan de acuerdo estás con las siguientes afirmaciones sobre tu facilitador?*

```{r afirmacion, echo=FALSE}
# Seleccionar columnas relevantes
columns_relevant <- c(
  "Var1",
  "Var2",
  "Var3",
  "Var4",
  "Var5",
  "Var6",
  "Var7"
)

# Filtrar los datos y calcular frecuencias en porcentaje
df_filtered <- df[columns_relevant]

df_frequencies <- df_filtered %>%
  pivot_longer(cols = everything(), names_to = "Pregunta", values_to = "Respuesta") %>%
  group_by(Pregunta, Respuesta) %>%
  summarise(Frecuencia = n(), .groups = "drop") %>%
  group_by(Pregunta) %>%
  mutate(Porcentaje = (Frecuencia / sum(Frecuencia)))

# Reemplazar los nombres largos por etiquetas cortas
df_frequencies$Pregunta <- recode(df_frequencies$Pregunta,
  "Var1" = "Inicia la sesión de clase a tiempo",
  "Var2" = "Vincula la sesión de clase con el prework",
  "Var3" = "Me incentiva a participar en clase",
  "Var4" = "Aclara las preguntas que se hacen en clase",
  "Var5" = "Plantea temas que ayudan a comprender la clase",
  "Var6" = "Logra un equilibrio entre su participación y la del grupo",
  "Var7" = "Tiene un buen control del grupo"
)

# Ordenar niveles de respuesta para que aparezcan en el orden correcto
df_frequencies$Respuesta <- factor(df_frequencies$Respuesta, levels = c("Muy en desacuerdo", "En desacuerdo", "De acuerdo", "Muy de acuerdo"))

# Crear gráfico de barras apiladas con correcciones

ggplot(df_frequencies, aes(x = Pregunta, y = Porcentaje, fill = Respuesta)) +
  geom_bar(stat = "identity", position = "fill") +
  coord_flip() +
  scale_fill_manual(values = c("Muy en desacuerdo" = "#E74C3C", 
                               "En desacuerdo" = "#F39C12", 
                               "De acuerdo" = "#A9DFBF", 
                               "Muy de acuerdo" = "#229954"),
                    guide = guide_legend(nrow = 2)) +  # Define las filas de la leyenda aquí
  scale_y_continuous(labels = function(x) paste0(x * 100, "%")) +  
  labs(title = "Distribución de respuestas",
       x = "", y = "Porcentaje de respuestas") +
  theme_minimal() +
  theme(legend.position = "bottom",  # Coloca la leyenda debajo del gráfico
        legend.title = element_blank(),  
        legend.direction = "horizontal",  
        legend.text = element_text(size = 8),  # Reduce tamaño del texto de la leyenda
        legend.key.size = unit(0.4, "cm"),  # Reduce el tamaño de los cuadros de la leyenda
        legend.spacing.x = unit(0.8, 'cm'),  
        legend.box.margin = margin(5, 5, 5, 5),  # Evita cortes
        plot.margin = margin(10, 10, 100, 10),  # Aumenta margen inferior para la leyenda
        plot.title = element_text(hjust = 0.5))  


```

\newpage

*B) Del 1 al 6, siendo 1 nada claro y 6 muy claro ¿Cómo calificarías la claridad y organización de las clases impartidas por este facilitador?*

```{r claridad_comparativo, echo=FALSE}
# Definir el nombre exacto de la variable en la base de datos
claridad_general_var <- "Var8"

# Convertir la variable a numérica asegurando valores correctos y eliminando NA
df <- df %>%
  mutate(Claridad_General_Num = as.numeric(.data[[claridad_general_var]])) %>%
  filter(!is.na(Claridad_General_Num))  # Elimina valores NA antes de graficar

# Calcular el promedio del facilitador con 1 decimal
promedio_facilitador <- facilitator_data %>%
  summarise(promedio = round(mean(as.numeric(.data[[claridad_general_var]]), na.rm = TRUE), 1)) %>%
  pull(promedio)

# Crear la gráfica de densidad con línea del promedio corregida
ggplot(df, aes(x = Claridad_General_Num)) +
  geom_density(fill = "lightblue", alpha = 0.5) +  # Density plot con transparencia
  geom_vline(xintercept = promedio_facilitador, color = "red", linewidth = 1.2) +  # Línea del promedio corregida
  annotate("text", x = promedio_facilitador - 0.2, 
           y = max(density(df$Claridad_General_Num, na.rm = TRUE)$y) * 0.9, 
           label = paste0("Promedio facilitador: ", promedio_facilitador), 
           color = "red", hjust = 1, size = 4, fontface = "bold") +  # Etiqueta en rojo con el promedio
  labs(title = "",
       x = "Calificación",
       y = "Frecuencia") +
  scale_x_continuous(limits = c(1, 6), breaks = 1:6) +  # Escala de X de 1 a 6
  theme_minimal()
```

\newpage

*C)Del 1 al 6, siendo 1 nada y 6 totalmente, ¿Qué tanto pueden los ejemplos utilizados en el curso (casos de estudio, lecturas, etc.) aplicarse en tu día a día?*

```{r aplicar, echo=FALSE}
# Definir el nombre exacto de la variable en la base de datos
aplicabilidad_var <- "Var9"

# Convertir la variable a numérica asegurando valores correctos y eliminando NA
df <- df %>%
  mutate(Aplicabilidad_Num = as.numeric(.data[[aplicabilidad_var]])) %>%
  filter(!is.na(Aplicabilidad_Num))  # Elimina valores NA antes de graficar

# Calcular el promedio del facilitador con 1 decimal
promedio_facilitador_aplicabilidad <- facilitator_data %>%
  summarise(promedio = round(mean(as.numeric(.data[[aplicabilidad_var]]), na.rm = TRUE), 1)) %>%
  pull(promedio)

# Crear la gráfica de densidad con línea del promedio corregida
ggplot(df, aes(x = Aplicabilidad_Num)) +
  geom_density(fill = "lightgreen", alpha = 0.5) +  # Density plot con transparencia
  geom_vline(xintercept = promedio_facilitador_aplicabilidad, color = "red", linewidth = 1.2) +  # Línea del promedio corregida
  annotate("text", x = promedio_facilitador_aplicabilidad - 0.2, 
           y = max(density(df$Aplicabilidad_Num, na.rm = TRUE)$y) * 0.9, 
           label = paste0("Promedio facilitador: ", promedio_facilitador_aplicabilidad), 
           color = "red", hjust = 1, size = 4, fontface = "bold") +  # Etiqueta en rojo con el promedio
  labs(title = "",
       x = "Calificación",
       y = "Frecuencia") +
  scale_x_continuous(limits = c(1, 6), breaks = 1:6) +  # Escala de X de 1 a 6
  theme_minimal()


```

\newpage

*D) De acuerdo con la experiencia que has tenido, en una escala del 1 al 10, ¿Qué tan probable es que recomiendes a este facilitador para impartir otros cursos?*

```{r recomendation_course, echo=FALSE}
# Definir el nombre exacto de la variable en la base de datos
recomendacion_var <- "Recommendation" 

# Convertir la variable a numérica asegurando valores correctos y eliminando NA
df <- df %>%
  mutate(Recomendacion_Num = as.numeric(.data[[recomendacion_var]])) %>%
  filter(!is.na(Recomendacion_Num))  # Elimina valores NA antes de graficar

# Calcular el promedio del facilitador con 1 decimal
promedio_facilitador_recomendacion <- facilitator_data %>%
  summarise(promedio = round(mean(as.numeric(.data[[recomendacion_var]]), na.rm = TRUE), 1)) %>%
  pull(promedio)

# Crear la gráfica de densidad con línea del promedio corregida
ggplot(df, aes(x = Recomendacion_Num)) +
  geom_density(fill = "thistle", alpha = 0.5) +  # Fondo en morado claro con transparencia
  geom_vline(xintercept = promedio_facilitador_recomendacion, color = "red", linewidth = 1.2) +  # Línea del promedio corregida
  annotate("text", x = promedio_facilitador_recomendacion - 0.3, 
           y = max(density(df$Recomendacion_Num, na.rm = TRUE)$y) * 0.9, 
           label = paste0("Promedio facilitador: ", promedio_facilitador_recomendacion), 
           color = "red", hjust = 1, size = 4, fontface = "bold") +  # Etiqueta en rojo con el promedio
  labs(title = "",
       x = "Calificación",
       y = "Frecuencia") +
  scale_x_continuous(limits = c(1, 10), breaks = 1:10) +  # Escala de X de 1 a 10
  theme_minimal()
```
\newpage

*E)¿Tienes algún comentario o recomendación?*

```{r comentario, echo=FALSE}
kable(facilitator_data %>% select(Comments) %>% filter(!is.na(Comments) & Comments != ""), 
      caption = "Var11")
```

## Recomendaciones de mejora

Alfredo,  

Tus fortalezas en la facilitación del curso son evidentes en la estructura clara de tus clases y en la aplicación efectiva de ejemplos que conectan con la experiencia de los estudiantes. Los comentarios resaltan tu habilidad para explicar conceptos de manera comprensible y generar un ambiente propicio para el aprendizaje.  

Una posible área de mejora es la retroalimentación personalizada. Algunos estudiantes mencionan que recibir comentarios más específicos sobre su desempeño les ayudaría a mejorar su comprensión y aplicación de los temas. Implementar estrategias que fomenten una retroalimentación más detallada podría fortalecer aún más la experiencia de aprendizaje.  

Presta especial atención en seguir promoviendo la participación activa y en explorar nuevas dinámicas que mantengan el interés de los alumnos, asegurando que cada sesión continúe siendo un espacio de aprendizaje enriquecedor y aplicado a su desarrollo profesional.

